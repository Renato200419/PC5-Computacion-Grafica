<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <title>Geometry Builder AR</title>
    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.153.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.153.0/examples/jsm/",
            "mindar-image-three": "https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js"
        }
    }
    </script>
    <!-- Estilos CSS externos -->
    <link rel="stylesheet" href="styles/geometry-builder.css">
    <!-- JavaScript de controles UI -->
    <script src="js/ui-controls.js"></script>
    <!-- JavaScript del sistema de desafÃ­os -->
    <script src="js/challenges.js"></script>
</head>
<body>
    <button id="startButton" onclick="startAR()">ğŸ® Iniciar Geometry Builder AR</button>
    
    <div id="scorePanel" style="display: none;">
        <p id="currentConcept" class="concept-info"></p>
        <p class="stats-line">ğŸ“¦ <span id="blockCount">0</span> | ğŸ“ <span id="volumeCount">0.0000</span> cmÂ³</p>
        <p class="mission-text">ğŸ¯ <span id="missionText">Coloca tu primer bloque</span></p>
        <hr class="panel-separator">
        <p class="score-text">â­ Puntos: <span id="scoreCount">0</span></p>
        <button id="challengeBtn" onclick="startChallenge()" class="gradient-button gradient-primary">
            ğŸ† Iniciar DesafÃ­o
        </button>
        <button id="sandboxBtn" onclick="enterSandboxMode()" class="gradient-button gradient-purple">
            ğŸ¨ Modo Libre
        </button>
    </div>
    
    <div id="trackingStatus" style="display: none;">ğŸ” Buscando tarjeta...</div>
    
    <div id="toolbar" style="display: none;">
        <button class="shapeBtn active" data-shape="cube" onclick="selectShape('cube')">ğŸŸ¦</button>
        <button class="shapeBtn" data-shape="sphere" onclick="selectShape('sphere')">ğŸ”µ</button>
        <button class="shapeBtn" data-shape="cylinder" onclick="selectShape('cylinder')">ğŸŸ«</button>
        <button class="shapeBtn" data-shape="pyramid" onclick="selectShape('pyramid')">ğŸ”º</button>
        <div class="toolbar-separator"></div>
        <button class="shapeBtn" data-shape="clear" onclick="clearAll()" style="background: rgba(244,67,54,0.5);">ğŸ—‘ï¸</button>
    </div>
    
    <div id="rotationHint" style="display: none;">
        <span id="modeHint">ğŸ”„ Modo RotaciÃ³n: Usa 2 dedos o arrastra | Flechas â† â†’ â†‘ â†“</span>
    </div>
    
    <div id="zoomControls" style="display: none;">
        <button class="zoomBtn" onclick="zoomIn()">+</button>
        <button class="zoomBtn" onclick="zoomOut()">-</button>
        <button class="zoomBtn" onclick="resetZoom()">âŸ²</button>
    </div>
    
    <div id="zoomIndicator" style="display: none;">
        <span>ğŸ”</span>
        <span id="zoomLevel">100%</span>
    </div>
    
    <div id="modeSelector" style="display: none;">
        <button class="modeBtn active" data-mode="rotate" onclick="setControlMode('rotate')">
            ğŸ”„
            <span class="tooltip">Modo RotaciÃ³n</span>
        </button>
        <button class="modeBtn" data-mode="zoom" onclick="setControlMode('zoom')">
            ğŸ”
            <span class="tooltip">Modo Zoom</span>
        </button>
        <button class="modeBtn" data-mode="place" onclick="setControlMode('place')">
            âœ‹
            <span class="tooltip">Modo Colocar</span>
        </button>
        <button class="modeBtn" data-mode="delete" onclick="setControlMode('delete')">
            âœ–ï¸
            <span class="tooltip">Modo Eliminar</span>
        </button>
        <button class="modeBtn" data-mode="freeze" onclick="toggleFreezeGrid()" id="freezeBtn">
            ğŸ”’
            <span class="tooltip">Congelar Grid</span>
        </button>
    </div>
    
    <div id="touchArea"></div>
    
    <div id="challengeInfo">
        <h2 id="challengeTitle">ğŸ¯ DesafÃ­o</h2>
        <p id="challengeDesc"></p>
        <div class="hint">
            <strong>ğŸ’¡ Pista:</strong>
            <p id="challengeHint"></p>
        </div>
        <p id="challengeGoal"></p>
        <button onclick="closeChallengeInfo()">Â¡Empezar!</button>
    </div>
    
    <!-- Cargar el mÃ³dulo principal de la aplicaciÃ³n -->
    <script type="module" src="app.js"></script>
</body>
</html>
